(()=>{const t={initComment(){$(".journal .comment").on("click",function(){$(this).parent().parent().siblings(".journal-comment").stop().slideToggle(200)})},initLike(){$(".journal .like").each(function(){const c=$(this),l=c.attr("data-cid");console.log("init "+l);let e=localStorage.getItem(encryption("agree-journal"));(e=e?JSON.parse(decrypt(e)):[]).includes(l)?c.removeClass("like"):(console.log("bind "+l),c.on("click",function(e){e.stopPropagation();let i=localStorage.getItem(encryption("agree-journal"));i=i?JSON.parse(decrypt(i)):[],Utils.request({url:"/api/content/journals/"+l+"/likes",method:"POST"}).then(e=>{var t=+(c.attr("data-likes")||0)+1,n=(i.push(l),c.removeClass("like"),encryption("agree-journal")),o=encryption(JSON.stringify(i));localStorage.setItem(n,o),c.off("click").next().html(t),Qmsg.success("点赞成功")}).catch(e=>{console.log(e)})}))})}};{const n=[];document.addEventListener("DOMContentLoaded",function(){Object.keys(t).forEach(e=>!n.includes(e)&&t[e]())}),window.addEventListener("load",function(){})}})();
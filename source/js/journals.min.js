/*
 * @Author: zhanghui rem486@qq.com
 * @Date: 2023-01-11 10:59:18
 * @LastEditors: zhanghui rem486@qq.com
 * @LastEditTime: 2023-01-11 11:17:19
 * @FilePath: \halo-theme-dream\source\js\journals.min.js
 * @Description: 说明
 */
(() => {
  const i = {
    initLike() {
      $(".journal .like").each(function () {
        Utils.like($(this), $(this).next(), "journals")
      })
    },
    initComment() {
      $(".journal .comment").on("click", function () {
        $(this).parent().parent().siblings(".journal-comment").stop().slideToggle(200)
      })
    },
    foldJournals() {
      $(".journal .journal-content").each(function () {
        const n = $(this);
        this.scrollHeight >= DreamConfig.journals_fold_height ? n.append('<div class="expand-done"><i class="fa fa-angle-double-up"></i></div>') : n.removeClass("fold")
      }), $(".journal-content>.expand-done").on("click", function () {
        Utils.foldBlock($(this).parent())
      })
    }
  };
  window.journalPjax = function (o) {
    0 !== $(".card.journal").length && Object.keys(i).forEach(n => window.pjaxSerialNumber === o && i[n]())
  }, window.pjaxSerialNumber || i.initLike(), window.pjaxSerialNumber || i.initComment(), document.addEventListener("DOMContentLoaded", function () {
    window.pjaxSerialNumber || i.foldJournals()
  })
})();
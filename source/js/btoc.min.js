(()=>{function s(t,e,n){this.tocList=t,this.elementList=function t(e,n){if(null==e)return null;var i=e.children;if(0==i.length)return null;for(var s=new Array,l=0;l<i.length;l++){var o=i[l];-1!=n.indexOf(o.tagName)&&s.push(o),s.push.apply(s,t(o,n))}return s}(e,this.tocList),this.eIndex=0,this.tocElement=n,this.build=function(){null!=this.elementList&&0!==this.elementList.length&&(n.innerHTML=this.analysis(-1,this.tocList.indexOf(this.elementList[this.eIndex].tagName)))},this.analysis=function(t,e){for(var n="<ul>";this.eIndex<this.elementList.length;){var i=this.elementList[this.eIndex],s=this.tocList.indexOf(i.tagName);if(t<s&&s<=e){e=s;var l=i.id,o=i.innerText;if(null!=l&&""!==l||(l=o+"_"+this.eIndex,i.setAttribute("id",l)),n+="<li><a href='#"+l+"'>"+o+"</a>",this.eIndex++,this.eIndex>=this.elementList.length){n+="</li>";break}(s=this.tocList.indexOf(this.elementList[this.eIndex].tagName))>e&&(n+=this.analysis(e,s)),n+="</li>"}else if(s<=t)break}return n+"</ul>"}}s.init=function(t){var e=t.tocList,n=t.contentElement,t=t.tocElement;if(null==e||0===e.length||null==n||null==t)return!1;for(var i=0;i<e.length;i++)e[i]=e[i].toUpperCase();new s(e,n,t).build()},r=window,c=document,s.init({tocList:["h1","h2","h3","h4","h5"],contentElement:$(".main-content")[0],tocElement:$("#toc .card-content")[0]}),0===$("#toc .card-content ul").length?($("#toc").remove(),$(".navbar-main .catalogue").remove()):($("#toc .card-content ul").addClass("menu-list"),$("#toc .card-content a").prepend('<i class="fa fa-paperclip"></i>')),void 0!==r.IntersectionObserver&&c.querySelectorAll("#toc").forEach(function(t){const a=new Set,i=new Map,s=Array.from(t.querySelectorAll(".menu-list > li > a"));for(const t of s){const r=t.getAttribute("href").trim().slice(1),a=c.getElementById(r);a&&i.set(a,t)}const l=Array.from(i.keys()),e=new IntersectionObserver(e=>{for(const r of e)r.isIntersecting?a.add(r.target):a.delete(r.target);let n;if(a.size?n=[...a].sort((t,e)=>t.offsetTop-e.offsetTop)[0]:l.length&&(n=l.filter(t=>t.offsetTop<r.scrollY).sort((t,e)=>e.offsetTop-t.offsetTop)[0]),n&&i.has(n)){s.forEach(t=>t.classList.remove("is-active"));const e=i.get(n);e.classList.add("is-active");let t=e.parentElement.parentElement;for(;t.classList.contains("menu-list")&&"li"===t.parentElement.tagName.toLowerCase();)t.parentElement.children[0].classList.add("is-active"),t=t.parentElement.parentElement}},{threshold:0});for(const t of l){if(e.observe(t),i.has(t)){const a=i.get(t);a.addEventListener("click",()=>{let n,t=c.getElementById(a.getAttribute("href").substring(1)).getBoundingClientRect(),i=r.pageYOffset,s=i+t.top-50,l=(s-i)/20,o=i>s?-1:1;r.requestAnimationFrame(function t(e){(i+=l)*o<s*o?(r.scrollTo(0,i),n=r.requestAnimationFrame(t)):(r.scrollTo(0,s),r.cancelAnimationFrame(n))})})}i.has(t)&&(t.style.scrollMargin="1em")}});{var t=jQuery;const n=t("#toc");if(0<n.length){const i=t("<div>");function e(){n.toggleClass("is-active"),i.toggleClass("is-active")}i.attr("id","toc-mask"),t("body").append(i),n.on("click",e),i.on("click",e),t(".navbar-main .catalogue").on("click",e)}}var r,c})();
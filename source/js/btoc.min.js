(()=>{function s(e,t,n){this.tocList=e,this.elementList=function e(t,n){if(null==t)return null;var i=t.children;if(0==i.length)return null;for(var s=new Array,l=0;l<i.length;l++){var a=i[l];-1!=n.indexOf(a.tagName)&&s.push(a),s.push.apply(s,e(a,n))}return s}(t,this.tocList),this.eIndex=0,this.tocElement=n,this.build=function(){null!=this.elementList&&0!==this.elementList.length&&(n.innerHTML=this.analysis(-1,this.tocList.indexOf(this.elementList[this.eIndex].tagName)))},this.analysis=function(e,t){for(var n="<ul>";this.eIndex<this.elementList.length;){var i=this.elementList[this.eIndex],s=this.tocList.indexOf(i.tagName);if(e<s&&s<=t){t=s;var l=i.id,a=i.innerText;if(null!=l&&""!==l||(l=a+"_"+this.eIndex,i.setAttribute("id",l)),n+="<li><a href='#"+l+"'>"+a+"</a>",this.eIndex++,this.eIndex>=this.elementList.length){n+="</li>";break}(s=this.tocList.indexOf(this.elementList[this.eIndex].tagName))>t&&(n+=this.analysis(t,s)),n+="</li>"}else if(s<=e)break}return n+"</ul>"}}s.init=function(e){var t=e.tocList,n=e.contentElement,e=e.tocElement;if(null==t||0===t.length||null==n||null==e)return!1;for(var i=0;i<t.length;i++)t[i]=t[i].toUpperCase();new s(t,n,e).build()},r=window,c=document,s.init({tocList:["h1","h2","h3","h4","h5"],contentElement:$(".content")[0],tocElement:$("#toc .menu")[0]}),0===$("#toc .menu ul").length?($("#toc").remove(),$(".navbar-main .catalogue").remove()):($("#toc .menu ul").addClass("menu-list"),$("#toc .menu a").addClass("is-flex").prepend('<i class="fa fa-paperclip"></i><span class="has-mr-6"></span>')),void 0!==r.IntersectionObserver&&c.querySelectorAll("#toc").forEach(function(e){const o=new Set,i=new Map,s=Array.from(e.querySelectorAll(".menu-list > li > a"));for(const e of s){const r=e.getAttribute("href").trim().slice(1),o=c.getElementById(r);o&&i.set(o,e)}const l=Array.from(i.keys()),t=new IntersectionObserver(t=>{for(const r of t)r.isIntersecting?o.add(r.target):o.delete(r.target);let n;if(o.size?n=[...o].sort((e,t)=>e.offsetTop-t.offsetTop)[0]:l.length&&(n=l.filter(e=>e.offsetTop<r.scrollY).sort((e,t)=>t.offsetTop-e.offsetTop)[0]),n&&i.has(n)){s.forEach(e=>e.classList.remove("is-active"));const t=i.get(n);t.classList.add("is-active");let e=t.parentElement.parentElement;for(;e.classList.contains("menu-list")&&"li"===e.parentElement.tagName.toLowerCase();)e.parentElement.children[0].classList.add("is-active"),e=e.parentElement.parentElement}},{threshold:0});for(const e of l){if(t.observe(e),i.has(e)){const o=i.get(e);o.addEventListener("click",()=>{let n,e=c.getElementById(o.getAttribute("href").substring(1)).getBoundingClientRect(),i=r.pageYOffset,s=i+e.top-50,l=(s-i)/20,a=i>s?-1:1;r.requestAnimationFrame(function e(t){(i+=l)*a<s*a?(r.scrollTo(0,i),n=r.requestAnimationFrame(e)):(r.scrollTo(0,s),r.cancelAnimationFrame(n))})})}i.has(e)&&(e.style.scrollMargin="1em")}});{var e=jQuery;const n=e("#toc");if(0<n.length){const i=e("<div>");function t(){n.toggleClass("is-active"),i.toggleClass("is-active")}i.attr("id","toc-mask"),e("body").append(i),n.on("click",t),i.on("click",t),e(".navbar-main .catalogue").on("click",t)}}var r,c})();
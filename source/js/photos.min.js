(()=>{const i={initPhotos(){const i=$(".photos-gallery");let s=!1,n=!1;const l={page:0,size:15,sort:"createTime,desc"};let c;const e=a=>{s=!0,i.addClass("loading");const e={...l,...a||{}};let o;(c=new Promise((t,i)=>{o=i,Utils.request({url:"/api/content/photos",method:"GET",data:e}).then(a=>t(a)).catch(a=>i(a))}).then(a=>{var t=a.content||[];n=0===t.length||(t=t.reduce((a,t,i)=>`${a}<div href="${t.url}" data-fancybox="gallery" data-caption="${t.description||t.name||""}"><img width="100%" height="100%" src="${t.thumbnail}" alt="${t.name||""}"/><span class="team">${t.team}</span><p class="tit">${t.name}</p><div class="info"><p class="animated fadeInRightBig"><i class="joe-font joe-icon-paizhao"></i><span>${t.name}</span></p>${t.location?`<p class="animated fadeInRightBig"><i class="joe-font joe-icon-dingwei"></i><span>${t.location}</span></p>`:""}<p class="animated fadeInRightBig"><i class="joe-font joe-icon-shijian"></i>${Utils.formatDate(t.takeTime)}</p></div></div>`,""),i.append(t),i.justifiedGallery({rowHeight:200,maxRowHeight:!1,maxRowsCount:0,sizeRangeSuffixes:{},lastRow:"nojustify",captions:!1,waitThumbnailsLoad:!0,margins:10,extension:/\.(jpe?g|png|gif|bmp|webp)$/,cssAnimation:!1}),a.isLast)}).catch(a=>console.log(a)).finally(()=>{console.log("finally"),i.removeClass("loading"),c=void 0,s=!1})).abort=o};e(),window.addEventListener("scroll",function(){$(window).scrollTop()+$(window).height()>=i.height()&&(s||n||(l.page++,e({team:$(".photos-teams li.active").attr("data-team"),size:10})))}),$(".photos-teams .item").on("click",function(a){a.stopPropagation();const t=$(this);t.hasClass("active")||(t.addClass("active").siblings("li").removeClass("active"),(async a=>{c&&(c.abort&&c.abort("abort"),await c),i.empty(),n=!1,s=!1,l.page=0,e(a)})({team:t.attr("data-team")}))})}};window.photoPjax=function(t){Object.keys(i).forEach(a=>window.pjaxSerialNumber===t&&i[a]())},window.pjaxSerialNumber||i.initPhotos()})();
(()=>{window.encryption=e=>window.btoa(unescape(encodeURIComponent(e))),window.decrypt=e=>decodeURIComponent(escape(window.atob(e)));const t={initWidget(){const e=$(".columns .column-right"),t=$(".columns .column-right-shadow");if(e.length&&t.length&&!t[0].children.length)for(const n of e[0].children)t[0].append(n.cloneNode(!0))},initTocAndNotice(){var e=location["pathname"],t=(console.log(e),window.tocPjax&&window.tocPjax(),0===$(".widget.toc .card-content ul").length),e="toc"===DreamConfig.notice_hide_mode&&!t||"index"===DreamConfig.notice_hide_mode&&"/"!==e;t?$(".widget.toc").addClass("is-hidden-all"):$(".widget.toc").removeClass("is-hidden-all"),e?$(".widget.notice").addClass("is-hidden-all"):$(".widget.notice").removeClass("is-hidden-all")},widgetFixedBottom(){const e=$(".left-bottom")[0],t=$(".right-bottom")[0];function n(){$(window).width()<769?e.style.top=null:e.style.top=$(window).height()-e.scrollHeight-10+"px"}function o(){1216<=$(window).width()&&(t.style.top=$(window).height()-t.scrollHeight-10+"px")}e&&(n(),$(window).resize(n),document.addEventListener("scroll",n)),t&&(o(),$(window).resize(o),document.addEventListener("scroll",o))},initGallery(){$('.main-content img:not(".not-gallery")').each(function(){0===$(this).parents("[data-fancybox]").length&&($(this).wrap($(`<span class="gallery-item" data-fancybox="gallery" data-caption="${$(this).attr("alt")}" href="${$(this).attr("src")}"></span>`)),this.alt&&$(this).after(`<p>${this.alt}</p>`))})},initMode(){let e=localStorage.getItem("night")||!1;const t=e=>{"true"===e.toString()?document.documentElement.classList.add("night"):document.documentElement.classList.remove("night")};t(e),$("#toggle-mode").on("click",function(){e=!e||"true"!==e.toString(),t(e),localStorage.setItem("night",e)})},initNavbar(){const e=$(".navbar-nav a"),t=$(".panel-side-menu .link");let n=0;const{href:o,pathname:s}=location,a=(s&&"/"!==s&&e.each((e,t)=>{t=t.getAttribute("href");(s.includes(t)||o.includes(t))&&(n=e)}),e.eq(n));a.addClass("current"),a.parents(".item-dropdown").length&&a.parents(".item-dropdown").find(".item-dropdown-link a").addClass("current"),t.eq(n).addClass("current")},initScroll(){let i=0;document.addEventListener("scroll",()=>{const e=$(document).scrollTop(),t=(a=(s=e)>i,i=s,a),n=$("body"),o=$(".actions");var s,a;t?n.addClass("move-up"):n.removeClass("move-up"),100<e?o.addClass("show"):o.removeClass("show")})},sparkInput(){var e=DreamConfig.spark_input_content&&DreamConfig.spark_input_content.filter(e=>0<e.length);e&&0<e.length&&window.sparkInput("spark-input",e)},initDropMenu(){$(".item-dropdown").each(function(e,t){const n=$(this).find(".item-dropdown-menu"),o=$(t).attr("trigger")||"click",s=$(t).attr("placement")||$(this).height()||0;n.css("top",s),"hover"===o?$(this).hover(()=>$(this).addClass("active"),()=>$(this).removeClass("active")):($(this).on("click",function(e){e.stopPropagation(),$(this).toggleClass("active"),$(document).one("click",()=>$(this).removeClass("active")),e.stopPropagation()}),n.on("click",e=>e.stopPropagation()))})},searchDialog(){const t=$(".navbar-search .result");$(".navbar-search .input").on("click",function(e){e.stopPropagation(),t.addClass("active")}),$(document).on("click",function(){t.removeClass("active")})},drawerMobile(){$(".navbar-slideicon").on("click",function(e){e.stopPropagation(),$(".navbar-searchout").removeClass("active");const t=$("html"),n=$(".navbar-mask"),o=$(".navbar-slideout");o.hasClass("active")?(t.removeClass("disable-scroll"),n.removeClass("active slideout"),o.removeClass("active")):(window.sessionStorage.setItem("lastScroll",t.scrollTop()),t.addClass("disable-scroll"),n.addClass("active slideout"),o.addClass("active"))})},searchMobile(){$(".navbar-searchicon").on("click",function(e){e.stopPropagation(),$(".navbar-slideout").removeClass("active");const t=$("html"),n=$(".navbar-mask"),o=$(".navbar-above"),s=$(".navbar-searchout");s.hasClass("active")?(t.removeClass("disable-scroll"),n.removeClass("active slideout"),s.removeClass("active"),o.removeClass("solid")):(window.sessionStorage.setItem("lastScroll",t.scrollTop()),t.addClass("disable-scroll"),n.addClass("active"),o.addClass("solid"),s.addClass("active"))})},maskClose(){$(".navbar-mask").on("click",function(e){e.stopPropagation();const t=$("html");t.removeClass("disable-scroll"),$(".navbar-mask").removeClass("active slideout"),$(".navbar-searchout").removeClass("active"),$(".navbar-slideout").removeClass("active"),$(".navbar-above").removeClass("solid");e=window.sessionStorage.getItem("lastScroll");e&&t.scrollTop(e),window.sessionStorage.removeItem("lastScroll")}).on("touchmove",e=>e.preventDefault)},sideMenuMobile(){$(".navbar-slideout-menu .current").parents(".panel-body").show().siblings(".panel").addClass("in"),$(".navbar-slideout-menu .panel").on("click",function(e){e.stopPropagation();const t=$(this),n=t.parent().parent();n.find(".panel").not(t).removeClass("in"),n.find(".panel-body").not(t.siblings(".panel-body")).stop().hide("fast"),t.toggleClass("in").siblings(".panel-body").stop().toggle("fast")})},back2Top(){$("#back-to-top").on("click",function(){$("body, html").animate({scrollTop:0},400)})},websiteTime(){var e,t,n,o;DreamConfig.website_time&&(e=new Date,t=new Date(DreamConfig.website_time),n=document.getElementById("websiteDay"),o=document.getElementById("websiteTime"),setInterval(function(){e.setTime(e.getTime()+1e3),difference=parseInt((e-t)/1e3),seconds=difference%60,1===String(seconds).length&&(seconds="0"+seconds),difference=parseInt(difference/60),minutes=difference%60,1===String(minutes).length&&(minutes="0"+minutes),difference=parseInt(difference/60),hours=difference%24,1===String(hours).length&&(hours="0"+hours),days=parseInt(difference/24),n.innerHTML="建站 "+days+" 天 ",o.innerHTML=hours+" 小时 "+minutes+" 分 "+seconds+" 秒"},1e3))}};{const n=[];document.addEventListener("DOMContentLoaded",function(){Object.keys(t).forEach(e=>!n.includes(e)&&t[e]())}),window.addEventListener("load",function(){1===n.length?t[n[0]]():n.forEach(e=>t[e]&&t[e]())})}window.commonContext=t})();
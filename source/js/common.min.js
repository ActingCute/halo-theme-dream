(()=>{window.encryption=t=>window.btoa(unescape(encodeURIComponent(t))),window.decrypt=t=>decodeURIComponent(escape(window.atob(t)));const e={initWidget(){const t=$(".columns .column-right"),e=$(".columns .column-right-shadow");if(t.length&&e.length&&!e[0].children.length)for(const o of t[0].children)e[0].append(o.cloneNode(!0))},widgetFixedBottom(){const t=$(".left-bottom")[0],e=$(".right-bottom")[0];function o(){$(window).width()<769?t.style.top=null:t.style.top=$(window).height()-t.scrollHeight-10+"px"}function a(){1216<=$(window).width()&&(e.style.top=$(window).height()-e.scrollHeight-10+"px")}t&&(o(),$(window).resize(o),document.addEventListener("scroll",o)),e&&(a(),$(window).resize(a),document.addEventListener("scroll",a))},initMode(){let t=localStorage.getItem("night")||!1;const e=t=>{"true"===t.toString()?document.documentElement.classList.add("night"):document.documentElement.classList.remove("night")};e(t),$("#toggle-mode").on("click",function(){t=!t||"true"!==t.toString(),e(t),localStorage.setItem("night",t)})},initNavbar(){const t=$(".navbar-nav a"),e=$(".panel-side-menu .link");let o=0;const{href:a,pathname:n}=location,s=(n&&"/"!==n&&t.each((t,e)=>{e=e.getAttribute("href");(n.includes(e)||a.includes(e))&&(o=t)}),t.eq(o));s.addClass("current"),s.parents(".item-dropdown").length&&s.parents(".item-dropdown").find(".item-dropdown-link a").addClass("current"),e.eq(o).addClass("current")},initScroll(){let i=0;document.addEventListener("scroll",()=>{const t=$(document).scrollTop(),e=(s=(n=t)>i,i=n,s),o=$("body"),a=$(".actions");var n,s;e?o.addClass("move-up"):o.removeClass("move-up"),100<t?a.addClass("show"):a.removeClass("show")})},sparkInput(){var t=DreamConfig.spark_input_content&&DreamConfig.spark_input_content.filter(t=>0<t.length);t&&0<t.length&&window.sparkInput("spark-input",t)},initDropMenu(){$(".item-dropdown").each(function(t,e){const o=$(this).find(".item-dropdown-menu"),a=$(e).attr("trigger")||"click",n=$(e).attr("placement")||$(this).height()||0;o.css("top",n),"hover"===a?$(this).hover(()=>$(this).addClass("active"),()=>$(this).removeClass("active")):($(this).on("click",function(t){t.stopPropagation(),$(this).toggleClass("active"),$(document).one("click",()=>$(this).removeClass("active")),t.stopPropagation()}),o.on("click",t=>t.stopPropagation()))})},searchDialog(){const e=$(".navbar-search .result");$(".navbar-search .input").on("click",function(t){t.stopPropagation(),e.addClass("active")}),$(document).on("click",function(){e.removeClass("active")})},drawerMobile(){$(".navbar-slideicon").on("click",function(t){t.stopPropagation(),$(".navbar-searchout").removeClass("active");const e=$("html"),o=$(".navbar-mask"),a=$(".navbar-slideout");a.hasClass("active")?(e.removeClass("disable-scroll"),o.removeClass("active slideout"),a.removeClass("active")):(window.sessionStorage.setItem("lastScroll",e.scrollTop()),e.addClass("disable-scroll"),o.addClass("active slideout"),a.addClass("active"))})},searchMobile(){$(".navbar-searchicon").on("click",function(t){t.stopPropagation(),$(".navbar-slideout").removeClass("active");const e=$("html"),o=$(".navbar-mask"),a=$(".navbar-above"),n=$(".navbar-searchout");n.hasClass("active")?(e.removeClass("disable-scroll"),o.removeClass("active slideout"),n.removeClass("active"),a.removeClass("solid")):(window.sessionStorage.setItem("lastScroll",e.scrollTop()),e.addClass("disable-scroll"),o.addClass("active"),a.addClass("solid"),n.addClass("active"))})},maskClose(){$(".navbar-mask").on("click",function(t){t.stopPropagation();const e=$("html");e.removeClass("disable-scroll"),$(".navbar-mask").removeClass("active slideout"),$(".navbar-searchout").removeClass("active"),$(".navbar-slideout").removeClass("active"),$(".navbar-above").removeClass("solid");t=window.sessionStorage.getItem("lastScroll");t&&e.scrollTop(t),window.sessionStorage.removeItem("lastScroll")}).on("touchmove",t=>t.preventDefault)},sideMenuMobile(){$(".navbar-slideout-menu .current").parents(".panel-body").show().siblings(".panel").addClass("in"),$(".navbar-slideout-menu .panel").on("click",function(t){t.stopPropagation();const e=$(this),o=e.parent().parent();o.find(".panel").not(e).removeClass("in"),o.find(".panel-body").not(e.siblings(".panel-body")).stop().hide("fast"),e.toggleClass("in").siblings(".panel-body").stop().toggle("fast")})},initGallery(){$('.main-content img:not(".not-gallery")').each(function(){0===$(this).parents("[data-fancybox]").length&&($(this).wrap($(`<span class="gallery-item" data-fancybox="gallery" data-caption="${$(this).attr("alt")}" href="${$(this).attr("src")}"></span>`)),this.alt&&$(this).after(`<p>${this.alt}</p>`))})},back2Top(){$("#back-to-top").on("click",function(){$("body, html").animate({scrollTop:0},400)})}};{const o=[];document.addEventListener("DOMContentLoaded",function(){Object.keys(e).forEach(t=>!o.includes(t)&&e[t]())}),window.addEventListener("load",function(){1===o.length?e[o[0]]():o.forEach(t=>e[t]&&e[t]())})}window.commonContext=e})();
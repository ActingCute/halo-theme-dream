(()=>{const i={initCodeBlock(){$("pre > code").each(function(t){const i=$(this).parent();let e=$(this).attr("class"),n="",a=!1;if(null!=e){let t=e.indexOf("|"),i=e.indexOf("<");n=-1!==t||-1!==i?((-1===t||-1!==i&&i<t)&&(a=!0,t=i),$(this).attr("class",e.substring(0,t)),t===e.length-1?e.substring(9,t):e.substring(t+1)):e.substring(9)}let o=$(this).text().split("\n").length-1||1,s=String(o).length,l=(1===s&&(s=2),"");for(var c=0;c<o;c++)l+=`<li>${String(c+1).padStart(s,0)}</li>`;let d="codeBlock"+t,r="";a&&(r=" close",$(this).hide());t=`<div><i class="fa fa-angle-down${r}" data-code='#${d}'></i><i class="fa fa-clipboard btn-clipboard" title="复制代码" data-clipboard-target='#${d}'></i></div>`;$(this).attr("id",d),i.prepend(`<ul>${l}</ul>`),o>DreamConfig.code_fold_line?i.wrap('<figure class="fold"></figure>').append('<div class="expand-done"><i class="fa fa-angle-double-up"></i></div>'):i.wrap("<figure></figure>"),i.parent().prepend(`<figcaption>${n}${t}</figcaption>`)}),hljs.initHighlightingOnLoad(),new ClipboardJS(".btn-clipboard").on("error",function(t){t.clearSelection(),alert("您的浏览器不支持复制")}),$(".main-content figure>figcaption .fa-angle-down").on("click",function(){$(this).is(".close")?($($(this).attr("data-code")).parent().slideDown(200),$(this).removeClass("close")):($($(this).attr("data-code")).parent().slideUp(200),$(this).addClass("close"))}),$(".main-content .expand-done").on("click",function(){Utils.foldBlock($(this).parent().parent())})},initLike(){$(".admire .agree.like").each(function(){Utils.like($(this),$(this).find("span").find("span"),"posts")})}};window.postPjax=function(){console.log("初始化 post"),Object.keys(i).forEach(t=>i[t]())},document.addEventListener("DOMContentLoaded",function(){Object.keys(i).forEach(t=>i[t]())})})();
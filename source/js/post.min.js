(()=>{const t={initCodeBlock(){$("pre > code").each(function(i){const t=$(this).parent();let e=$(this).attr("class"),n="",a=!1;if(null!=e){let i=e.indexOf("|"),t=e.indexOf("<");n=-1!==i||-1!==t?((-1===i||-1!==t&&t<i)&&(a=!0,i=t),$(this).attr("class",e.substring(0,i)),i===e.length-1?e.substring(9,i):e.substring(i+1)):e.substring(9)}let s=$(this).text().split("\n").length-1||1,l=String(s).length,o=(1===l&&(l=2),"");for(var d=0;d<s;d++)o+=`<li>${String(d+1).padStart(l,0)}</li>`;let r="codeBlock"+i,c="";a&&(c=" close",$(this).hide());i=`<div><i class="fa fa-angle-down${c}" data-code='#${r}'></i><i class="fa fa-clipboard btn-clipboard" title="复制代码" data-clipboard-target='#${r}'></i></div>`;$(this).attr("id",r),t.prepend(`<ul>${o}</ul>`),s>DreamConfig.code_fold_line?t.wrap('<figure class="fold"></figure>').append('<div class="expand-done"><i class="fa fa-angle-double-up"></i></div>'):t.wrap("<figure></figure>"),t.parent().prepend(`<figcaption>${n}${i}</figcaption>`)}),hljs.initHighlightingOnLoad(),new ClipboardJS(".btn-clipboard").on("error",function(i){i.clearSelection(),alert("您的浏览器不支持复制")}),$(".main-content figure>figcaption .fa-angle-down").on("click",function(){$(this).is(".close")?($($(this).attr("data-code")).parent().slideDown(200),$(this).removeClass("close")):($($(this).attr("data-code")).parent().slideUp(200),$(this).addClass("close"))}),$(".main-content .expand-done").on("click",function(){const i=$(this).parent().parent(),t=$("body,html"),e=i.height();var n;i.is(".fold")?i.removeClass("fold"):(n=t.scrollTop(),i.addClass("fold"),t.scrollTop(n-e+i.height()))})},initLike(){$(".admire .agree.like").each(function(){Utils.like($(this),$(this).find("span").find("span"),"posts")})}};document.addEventListener("DOMContentLoaded",function(){Object.keys(t).forEach(i=>t[i]())})})();
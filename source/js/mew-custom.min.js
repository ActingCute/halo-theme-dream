(()=>{class e extends HTMLElement{constructor(){super(),this.hasAttribute("draw")||this.init()}drawComplete(){this.setAttribute("draw",!0)}}document.addEventListener("DOMContentLoaded",()=>{customElements.define("mew-subtitle",class extends e{init(){this.innerHTML=`<span>${this.innerText||"默认标题"}</span>`,this.drawComplete()}}),customElements.define("mew-music",class e extends HTMLElement{constructor(){super(),this.innerHTML="音乐播放器加载中...",this.options={container:this,theme:this.getAttribute("theme")||"var(--theme)",loop:this.getAttribute("loop")||"all",autoplay:this.hasAttribute("autoplay")&&"false"!==this.getAttribute("autoplay"),lrcType:3},"APlayer"in window?this.render():e.prototype.load?e.prototype.await.push(()=>this.render()):(e.prototype.load=!0,e.prototype.await=[],new Promise(t=>{$("head").append('<link rel="stylesheet" href="https://unpkg.com/aplayer@1.10.1/dist/APlayer.min.css">'),Utils.cachedScript("https://unpkg.com/aplayer@1.10.1/dist/APlayer.min.js").done(()=>t()).fail(()=>t())}).then(()=>{this.render(),e.prototype.await&&e.prototype.await.forEach(t=>t())}))}render(){"APlayer"in window?new Promise(async t=>{if(this.hasAttribute("song"))this.options.audio=await fetch("https://api.i-meto.com/meting/api?server=netease&type=song&id="+this.getAttribute("song")).then(t=>t.json());else if(this.hasAttribute("playlist"))this.options.listFolded=this.getAttribute("fold"),this.options.order=this.getAttribute("order"),this.options.audio=await fetch("https://api.i-meto.com/meting/api?server=netease&type=playlist&id="+this.getAttribute("playlist")).then(t=>t.json());else{if(!this.hasAttribute("url"))return this.innerHTML="未指定播放的音乐！",t();this.options.audio=[{name:this.getAttribute("name")||"音乐",url:this.getAttribute("url"),artist:this.getAttribute("artist")||"未知歌手",cover:this.getAttribute("cover"),lrc:this.getAttribute("lrc")||(this.options.lrcType=void 0)}]}this.aplayer=new APlayer(this.options),t()}):this.innerHTML="未开启音乐播放器！"}disconnectedCallback(){this.aplayer&&this.aplayer.destroy()}}),customElements.define("mew-bilibili",class extends e{init(){this.options={bvid:this.getAttribute("bvid"),width:/^\d{1,3}%$/.test(this.getAttribute("width"))?this.getAttribute("width"):"100%"},this.options.bvid?(this.style.padding=`calc(${this.options.width} * 0.3) 0`,this.innerHTML=`<iframe allowfullscreen="true" src="//player.bilibili.com/player.html?bvid=${this.options.bvid}&page=1" style="width: ${this.options.width};"></iframe>`):this.innerHTML="bvid未填写！",this.drawComplete()}}),customElements.define("mew-tabs",class extends e{init(){const t=$(this).children("mew-tab-page");if(0===t.length)return this.innerHTML="没有标签页！",void this.drawComplete();let s="",o="",n=!1;t.each((t,e)=>{var i=e.getAttribute("title")||"默认标签",t=t+"-"+(new Date).getTime();!n&&e.hasAttribute("active")?(n=!0,s+=`<div class="active" data-id="#${t}">${i}</div>`,o+=`<div class="active" id="${t}">${e.innerHTML}</div>`):(s+=`<div data-id="#${t}">${i}</div>`,o+=`<div id="${t}">${e.innerHTML}</div>`)}),this.innerHTML=`<div class="tabs-head">${s}</div><div class="tabs-body">${o}</div>`,n||$(this).find("div>div:first-child").addClass("active"),this.drawComplete()}connectedCallback(){$(this).find(".tabs-head").on("click","div:not(.active)",function(){const t=$(this).parent().parent();t.find(".active").removeClass("active"),$(this).addClass("active"),t.find($(this).attr("data-id")).addClass("active")})}}),customElements.define("mew-cloud",class extends e{init(){this.options={type:this.getAttribute("type")||"default",title:this.innerText||"资源文件分享",url:this.getAttribute("url"),password:this.getAttribute("password")};var t={default:"网络来源",360:"360云盘",bd:"百度网盘",wy:"微云",ali:"阿里云盘",github:"Github仓库",gitee:"Gitee仓库"};this.innerHTML=`
					<div class="mew-cloud-logo type-${t[this.options.type]?this.options.type:"default"}"></div>
					<div class="mew-cloud-desc">
						<div class="mew-cloud-desc-title">${this.options.title}</div>
						<div class="mew-cloud-desc-type">来源：${t[this.options.type]||"网络来源"}${this.options.password?" | 提取码："+this.options.password:""}</div>
					</div>
					<a class="mew-cloud-link" href="${this.options.url}" target="_blank" rel="noopener noreferrer nofollow">
						<i class="fa fa-download"></i>
					</a>
				`,this.drawComplete()}}),customElements.define("mew-progress",class extends e{init(){this.options={value:/^\d{1,3}%$/.test(this.getAttribute("value"))?this.getAttribute("value"):"50%",color:this.getAttribute("color")||"var(--theme)"},this.innerHTML=`<div class="mew-progress-bar">
									<div class="mew-progress-bar-inner" style="width: ${this.options.value}; background: ${this.options.color};"></div>
								</div>
								<div class="mew-progress-value">${this.options.value}</div>`,this.drawComplete()}}),customElements.define("mew-panel",class extends e{init(){this.options={title:this.getAttribute("title")||"",color:this.getAttribute("color")||"var(--theme)"},this.innerHTML=`
                <div class="mew-panel-title">${this.options.title}</div>
                <div class="mew-panel-body">${this.innerHTML}</div>`,this.style.background=this.options.color,this.style.color=this.options.color,this.drawComplete()}}),customElements.define("mew-message",class extends e{init(){this.options={type:/^(success|info|warning|error)$/.test(this.getAttribute("type"))?this.getAttribute("type"):"info",content:this.innerHTML||"消息内容"},this.innerHTML=this.options.content,this.setAttribute("type",this.options.type),this.drawComplete()}}),customElements.define("mew-hr",class extends e{init(){this.startColor=this.getAttribute("startColor")||"#01d0ff",this.endColor=this.getAttribute("endColor")||"#fc3e85",this.style.backgroundImage=`repeating-linear-gradient(-45deg, ${this.startColor} 0,${this.startColor} 20%, transparent 0,transparent 35%, ${this.endColor} 0,${this.endColor} 65%, transparent 0,transparent 80%, ${this.startColor} 0,${this.startColor} 100%)`,this.drawComplete()}}),customElements.define("mew-timeline",class extends e{init(){let t="",e=this.firstChild;for(;e;){var i;"MEW-TIMELINE-TITLE"===e.tagName?t+=`<div class="mew-timeline-title ${e.getAttribute("type")||""}"><span class="mew-timeline-title-elem">${e.innerHTML}</span></div>`:"MEW-TIMELINE-ITEM"===e.tagName&&(e.getAttribute("type"),i=e.getAttribute("title")?`<span class="mew-timeline-item-title">${e.getAttribute("title")}</span>`:"",t+=`<div class="mew-timeline-item ${e.getAttribute("type")||""}">${i}<div class="mew-timeline-item-content">${e.innerHTML}</div></div>`),e=e.nextElementSibling}this.innerHTML=t,this.drawComplete()}}),customElements.define("mew-btn",class extends e{init(){this.options={color:this.getAttribute("color")||"var(--theme)",href:this.getAttribute("href"),target:this.getAttribute("target")||"_blank",icon:this.getAttribute("icon")},this.innerHTML=`<a class="mew-btn">${this.options.icon?`<i class="fa ${this.options.icon}"></i>`:""}${this.innerHTML}</a>`;const t=this.querySelector("a.mew-btn");this.options.href&&(t.href=this.options.href,t.target=this.options.target),this.drawComplete()}}),customElements.define("mew-quote",class extends e{init(){this.options={avatar:this.getAttribute("avatar"),href:this.getAttribute("href"),name:this.getAttribute("name")};var t=this.options.avatar?`<div class="mew-quote-avatar"><a class="mew-quote-href" target="_blank" ${this.options.href?`href="${this.options.href}"`:""}><img class="quote-avatar-hexagon" src="${this.options.avatar}"/></a></div>`:"",e=this.options.name?`<a class="mew-quote-name" target="_blank" ${this.options.href?`href="${this.options.href}"`:""}>${this.options.name}</a>`:"";this.innerHTML=`<div class="mew-quote"><div class="quote-container">${t}<div class="mew-quote-info"><p class="mew-quote-content">${this.innerHTML}</p>${e}</div></div></div>`,this.drawComplete()}}),customElements.define("mew-link",class extends e{init(){this.options={img:this.getAttribute("img"),href:this.getAttribute("href")||"",title:this.getAttribute("title")||"我分享了一个网站"};var t=this.options.img?`<span class="mew-link-image"><img class="link-image" src="${this.options.img}"/></span>`:"",e=this.innerHTML?`<span class="info-desc">${this.innerHTML}</span>`:`<span class="mew-link-href info-desc">${this.options.href}</span>`;this.innerHTML=`<a class="mew-link" target="_blank" href="${this.options.href}"><span class="mew-link-info"><p class="info-title">${this.options.title}</p>${e}</span>${t}</a>`,this.drawComplete()}}),customElements.define("mew-video",class extends e{init(){this.options={src:this.getAttribute("src"),type:this.getAttribute("type"),autoplay:this.hasAttribute("autoplay")&&"false"!==this.getAttribute("autoplay"),controls:"false"!==this.getAttribute("controls"),loop:this.hasAttribute("loop")&&"false"!==this.getAttribute("loop"),muted:this.hasAttribute("muted")&&"false"!==this.getAttribute("muted"),preload:this.hasAttribute("preload")&&"false"!==this.getAttribute("preload"),poster:this.getAttribute("poster"),width:/^\d{1,3}%$/.test(this.getAttribute("width"))?this.getAttribute("width"):"100%"},this.innerHTML=`<video width="${this.options.width}" ${this.options.poster?`poster="${this.options.poster}"`:""}${this.options.autoplay?" autoplay":""}${this.options.controls?" controls":""}${this.options.loop?" loop":""}${this.options.muted?" muted":""}${this.options.preload?" preload":""}><source src="${this.options.src}" ${this.options.type?`type="${this.options.type}"`:""}>不支持视频播放器！</video>`,this.drawComplete()}}),customElements.define("mew-photos",class t extends e{init(){$.fn.justifiedGallery?this.render():t.prototype.load?t.prototype.await.push(()=>this.render()):(t.prototype.load=!0,t.prototype.await=[],new Promise(t=>{Utils.cachedScript("https://unpkg.com/justifiedGallery@3.8.1/dist/js/jquery.justifiedGallery.min.js").done(()=>t()).fail(()=>t())}).then(()=>{this.render(),t.prototype.await&&t.prototype.await.forEach(t=>t())}))}render(){this.options={captions:this.hasAttribute("captions")&&"false"!==this.getAttribute("captions"),margins:this.getAttribute("margins")||"4"},$(this).find("img").each((t,e)=>{$(e).wrap(`<div class="gallery-item" data-fancybox="gallery" ${e.alt?'data-caption="'+e.alt+'"':""} href="${e.src}"></div>`)}),$(this).justifiedGallery({captions:this.options.captions,margins:this.options.margins}),this.drawComplete()}})})})();